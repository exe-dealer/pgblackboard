<!DOCTYPE html>
<html>
<head>
    <title>pgBlackboard</title>
    <link href="/layout.css" rel="stylesheet" type="text/css" />
    <link href="/dark.css" rel="stylesheet" type="text/css" />
    <link href="/tree.css" rel="stylesheet" type="text/css" />
</head>
<body class="splitpanel-h">

    <section id="leftpanel" class="panel scrollbox splitfix">
        <section data-bind="template: { name: 'my-queries-tmpl' }"></section>
        <section class="tree" data-bind="template: { name: 'tree-node-list-tmpl' }"></section>
    </section>

    <div class="splitter"></div>

    <section class="splitstretch splitpanel-v">
        <form id="code-form" method="POST" action="sql" target="result"
            class="code-form splitstretch">
            <code id="code" class="code"></code>
            <input type="hidden" name="query" id="query-input" />

            <div id="exec-commands">
                <button id="exec-map" class="action" title="Execute to map"
                    type="submit" name="format" value="map"></button>
                <button id="exec-table" class="action" title="Ctrl+Shift+E"
                    type="submit" name="format" value="html"></button>
            </div>
        </form>
        <div class="splitter"></div>
        <iframe name="result" class="result scrollbox splitfix"></iframe>
    </section>

    <template id="tree-node-list-tmpl">
        <ul class="tree-node-list" data-bind="foreach: nodes">
            <li class="tree-node">
                <header class="tree-node-header">
                    <button class="hitarea tree-node-toggler"
                            data-bind="click: toggle"
                            data-bind.tree-node-toggler_hidden="!hasChildren"
                            data-bind.tree-node-toggler_collapsed="!isExpanded"
                            data-bind.tree-node-toggler_expanded="isExpanded"
                            data-bind.tree-node-toggler_loading="childrenAreLoading"></button>
                    <i data-bind="attr: { class: 'tree-node-icon icon-' + icon, title: icon }"></i>
                    <span class="tree-node-name" data-bind="template: { name: nameTmpl }"></span>
                    <span class="tree-node-comment"></span>
                </header>
                <!-- ko template: { name: 'tree-node-list-tmpl', if: isExpanded } --><!-- /ko -->
            </li>
        </ul>
    </template>

    <template id="def-tree-node-name-tmpl">
        <span data-bind="text: name"></span>
    </template>

    <template id="column-tree-node-name-tmpl">
        <span data-bind="text: name"></span>
        <span>:</span>
        <span data-bind="text: dataType"></span>
    </template>

    <template id="my-queries-tmpl">
        <section class="my-queries" data-bind="with: myQueries">
            <ul class="my-queries-list" data-bind="foreach: items">
                <li class="my-queries-item"
                    data-bind.my-queries-item-current="isCurrent">
                    <a href="#" class="icon-code my-queries-item-name"
                    data-bind="click: open, text: name"></a>
                    <button class="action my-queries-item-del"
                        data-bind="click: remove"></button>
                </li>
            </ul>
            <button class="action" data-bind="click: add">new query</button>
        </section>
    </template>



    <script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js"></script>
    <script src="/knockout-es5.js" type="text/javascript"></script>
    <script src="/knockout-class.js" type="text/javascript"></script>
    <script src="/app.js" type="text/javascript"></script>
    <script src="/splitpanel.js" type="text/javascript"></script>
</body>
</html>
