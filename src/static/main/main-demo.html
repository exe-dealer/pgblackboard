<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src="http://knockoutjs.com/downloads/knockout-3.3.0.debug.js"></script>

  <script>
  function loadTemplate(url) {
    var req = new XMLHttpRequest();
    req.open('GET', url, false);
    req.send();
    document.write(req.responseText);
  }
  </script>

  <link href="main.css" rel="stylesheet" />
  <script src="main.js"></script>
  <script>loadTemplate('main.template.html')</script>

	<link href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.12.0/codemirror.css" rel="stylesheet" />
	<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.12.0/codemirror.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.12.0/addon/search/searchcursor.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.12.0/keymap/sublime.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.12.0/addon/edit/matchbrackets.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.12.0/addon/edit/closebrackets.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.12.0/mode/sql/sql.js"></script>

	<link href="../codeform/codeform.less" rel="stylesheet/less" />
	<script src="../codeform/codeform.js"></script>
	<script>loadTemplate('../codeform/codeform.template.html')</script>

  <link href="../nav/nav.less" rel="stylesheet/less" />
  <script src="../nav/nav.js"></script>
  <script>loadTemplate('../nav/nav.template.html')</script>

  <link href="../nav/tree/tree.less" rel="stylesheet/less" />
  <script src="../nav/tree/tree.js"></script>
  <script>loadTemplate('../nav/tree/tree.template.html')</script>

  <link href="../nav/myqueries/myqueries.less" rel="stylesheet/less" />
  <script src="../nav/myqueries/myqueries.js"></script>
  <script>loadTemplate('../nav/myqueries/myqueries.template.html')</script>

  <script src="../splitpanel/splitpanel.js"></script>
  <link href="../splitpanel/splitpanel.css" rel="stylesheet" />
  <script>loadTemplate('../splitpanel/splitpanel.template.html')</script>


  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/2.4.0/less.js"></script>

</head>
<body>

	<!-- ko component: {
		name: 'x-main',
		params: $data
	} --><!-- /ko -->

	<script>
	TreeNode.prototype.getDoc = function () {
		var doc = ko.observable().extend({ codeEditorDoc: true });
		setTimeout(function () {
			doc(this.name);
			doc.notifySubscribers(doc(), 'ready');
		}.bind(this), 1000);
		return doc;
	};

	ko.applyBindings({
		myQueriesStorage: window.sessionStorage,
		databases: [
			{
				name: 'postgres',
				database: 'postgres',
				typ: 'database',
			},
			{
				name: 'demo',
				database: 'demo',
				typ: 'database'
			}
		],
		initialCode: 'demo'
	});
	</script>
</body>
</html>
